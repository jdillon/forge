{"id":"forge-079","title":"Agent-friendly command introspection (help2man++)","description":"A command that generates AI-agent consumable documentation about CLI tools. Similar to `help2man` but designed for AI consumption rather than man pages.\n\n**Core idea**: Given a command, recursively discover and document all nested sub-commands with their `--help` outputs in a structured, agent-optimized format.\n\n**Use case**: AI agents can query a tool to understand how to use it (or a specific sub-command) without needing pre-existing knowledge or manual documentation.","design":"## Key Features\n\n1. **Recursive sub-command discovery** - Automatically traverse command trees (e.g., `git remote add --help`)\n2. **Structured output** - JSON/YAML format optimized for LLM consumption\n3. **Option parsing** - Extract flags, arguments, defaults, types\n4. **Examples extraction** - Pull usage examples from help text\n5. **Semantic grouping** - Group related options/commands\n\n## Output Format Considerations\n\n- Machine-readable (JSON/YAML)\n- Include command hierarchy/tree structure\n- Normalize option descriptions\n- Flag required vs optional\n- Show argument types and defaults\n- Include usage patterns\n\n## Potential Approaches\n\n1. **Static analysis** - Parse `--help` output heuristically\n2. **Convention-based** - Support common CLI frameworks (Click, Cobra, yargs, etc.)\n3. **Interactive probing** - Try sub-commands to discover structure\n4. **Hybrid** - Combine approaches based on detection\n\n## Prior Art\n\n- `help2man` - Generates man pages from `--help`\n- `docopt` - Derives CLI from docstrings\n- Various shell completion generators","acceptance_criteria":"- [ ] Can introspect a simple command with `--help`\n- [ ] Can recursively discover nested sub-commands\n- [ ] Outputs structured JSON/YAML format\n- [ ] Handles common CLI patterns (flags, positional args, sub-commands)\n- [ ] Output is validated as useful by testing with an AI agent\n- [ ] Documented with examples","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-26T02:21:05.858242-08:00","updated_at":"2025-11-26T02:21:05.858242-08:00"}
{"id":"forge-0hx","title":"Update GitHub/Homebrew formula","description":"Update Homebrew formula and GitHub configuration.\n\n**Files**:\n- `.github/formula-template.rb`: class name, homepage, URLs, bin references\n- `.github/workflows/ci.yml`: any forge references\n- `.github/workflows/release.yml`: any forge references\n\n**Formula changes**:\n- `class Forge` → `class Commando`\n- `bin/\"forge\"` → `bin/\"cmdo\"`\n- Homepage and repository URLs","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-06T16:45:13.470592-08:00","updated_at":"2025-12-06T16:45:13.470592-08:00","dependencies":[{"issue_id":"forge-0hx","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:37.068339-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-3ng","title":"Make forge and homebrew-planet57 repos public","description":"Both repositories are currently private on GitHub. Need to make them public for:\n- Users to install via `brew tap jdillon/planet57`\n- Open source distribution\n\n**Repos**:\n- `github.com/jdillon/forge`\n- `github.com/jdillon/homebrew-planet57`","acceptance_criteria":"- [ ] jdillon/forge is public\n- [ ] jdillon/homebrew-planet57 is public\n- [ ] Verify `brew tap jdillon/planet57` works from external machine","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-11-26T02:26:01.006523-08:00","updated_at":"2025-11-27T00:37:48.595259-08:00","closed_at":"2025-11-27T00:37:48.595259-08:00"}
{"id":"forge-4tl","title":"Move to protected branch strategy for beads","description":"Currently beads sync directly to main branch. Need to implement protected branch workflow where beads changes go through PR review like code changes.\n\nConsiderations:\n- How to handle bd sync with protected main\n- PR workflow for .beads/ changes\n- Hook integration for branch-aware syncing\n- May need bd sync --branch or similar","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:17:02.270326-08:00","updated_at":"2025-12-25T17:17:09.433538-08:00"}
{"id":"forge-5z4","title":"Update shell scripts (install/uninstall/bootstrap)","description":"Update all shell scripts with new names and paths.\n\n**Files**:\n- `bin/install.sh`: ~15 changes (FORGE_HOME, paths, package refs)\n- `bin/uninstall.sh`: ~10 changes\n- `bin/brew-bootstrap.sh`: ~20 changes\n- `bin/cmdo` (formerly forge): ~10 changes\n- `bin/cmdo-dev` (formerly forge-dev): ~25 changes\n\n**Key patterns to replace**:\n- `FORGE_HOME` → `COMMANDO_HOME`\n- `~/.forge` → `~/.commando`\n- `@planet57/forge` → `@planet57/commando`\n- `bin/forge` → `bin/cmdo`\n- `@forge/*` → `@commando/*` (path aliases)\n- Tarball names: `planet57-forge-*.tgz` → `planet57-commando-*.tgz`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T16:45:12.516895-08:00","updated_at":"2025-12-25T17:47:28.211888-08:00","closed_at":"2025-12-25T17:47:28.211888-08:00","close_reason":"Types renamed, shell scripts updated","dependencies":[{"issue_id":"forge-5z4","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.022876-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-5z4","depends_on_id":"forge-ubk","type":"blocks","created_at":"2025-12-06T16:45:50.371607-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-631","title":"Forge doesn't auto-install when dependencies added to config.yml","description":"When adding a new dependency to `config.yml`, forge does not automatically detect the change and run `bun install`.\n\nUser has to manually trigger the install or run a command that happens to check deps.\n\nRelated to forge-gr3 (subcommand dep detection) but distinct - this is about detecting config.yml changes, not just missing deps.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-08T16:37:12.129425-08:00","updated_at":"2025-12-08T16:37:12.129425-08:00","labels":["bootstrap","config","dependencies"],"dependencies":[{"issue_id":"forge-631","depends_on_id":"forge-gr3","type":"related","created_at":"2025-12-08T16:37:20.82704-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-6u6","title":"Support custom command name registration separate from export identifier","description":"Currently command registration uses the export identifier (e.g., `issueStatus`). Need a way to register commands with a different name (e.g., `issue-status`) while keeping valid JS identifiers for exports.\n\nExample:\n```typescript\nexport const issueStatus: ForgeCommand = {\n  name: 'issue-status',  // registered as 'issue-status'\n  // ...\n}\n```","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-13T01:04:22.519415-08:00","updated_at":"2025-12-13T01:04:22.519415-08:00"}
{"id":"forge-72c","title":"Update documentation (README, CLAUDE.md, docs/)","description":"Update all documentation files.\n\n**Core docs**:\n- `README.md`: brew install command, URLs, all \"Forge\" references\n- `CLAUDE.md`: FORGE_HOME architecture section, paths, bead prefix\n- `CHANGELOG.md`: historical references (update for clarity)\n\n**docs/ directory** (~60 files):\n- `docs/command-patterns.md`\n- `docs/features/*.md`\n- `docs/planning/*.md`\n- `docs/reference/module-resolution.md`\n\n**Patterns**:\n- \"Forge\" → \"Commando\" (project name)\n- `.forge/` → `.commando/`\n- `FORGE_HOME` → `COMMANDO_HOME`\n- `forge-xxx` → `commando-xxx` (bead references)\n- GitHub URLs","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-06T16:45:13.308224-08:00","updated_at":"2025-12-06T16:45:13.308224-08:00","dependencies":[{"issue_id":"forge-72c","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.894461-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-7ik","title":"Test 2: after commit","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-28T22:36:20.519068-08:00","updated_at":"2025-11-28T22:36:20.519068-08:00"}
{"id":"forge-8d9","title":"Update tests/ files","description":"Update all test files and fixtures.\n\n**Files**:\n- `tests/install.test.ts`: paths, package refs (~10 changes)\n- `tests/lib/test-env.ts`: TEST_FORGE_HOME → TEST_COMMANDO_HOME\n- `tests/lib/runner.ts`: bin/forge-dev → bin/cmdo-dev\n- `tests/fixtures/test-project/.commando/test-commands.ts`: imports\n\n**Patterns**:\n- `FORGE_HOME` → `COMMANDO_HOME`\n- `.forge/` → `.commando/`\n- `@planet57/forge` → `@planet57/commando`\n- `~/.local/bin/forge` → `~/.local/bin/cmdo`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-06T16:45:13.144564-08:00","updated_at":"2025-12-06T16:45:13.144564-08:00","dependencies":[{"issue_id":"forge-8d9","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.721118-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-8d9","depends_on_id":"forge-bch","type":"blocks","created_at":"2025-12-06T16:45:50.509337-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-97e","title":"GitHub CI automation (build, test, release)","description":"Set up GitHub Actions for CI/CD:\n- Build and test on PR/push\n- Release workflow on tag push\n- Homebrew formula update automation\n\nRelated: forge-kxw (Homebrew automation details)","design":"## Workflows\n\n### 1. ci.yml - Build \u0026 Test\nTriggers: push to main, pull requests\n\n```yaml\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: oven-sh/setup-bun@v2\n      - run: bun install\n      - run: bun test\n```\n\n### 2. release.yml - Release \u0026 Homebrew Update\nTriggers: tag push (v*)\n\n```yaml\njobs:\n  release:\n    steps:\n      - Build tarball (bun run pack)\n      - Create GitHub release with tarball\n      \n  update-homebrew:\n    needs: release\n    steps:\n      - Download tarball, compute sha256\n      - Generate formula from template\n      - Push to homebrew-planet57\n```\n\n## Secrets Required\n- `HOMEBREW_TAP_TOKEN`: PAT with repo scope for tap repo","acceptance_criteria":"- [ ] ci.yml runs tests on PR and push to main\n- [ ] release.yml creates GitHub release on tag\n- [ ] release.yml updates Homebrew formula automatically\n- [ ] Tests pass in CI environment","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T15:46:49.200094-08:00","updated_at":"2025-11-27T01:14:15.03316-08:00","closed_at":"2025-11-27T01:14:15.03316-08:00"}
{"id":"forge-9q2","title":"Update examples/ content","description":"Update all example project content.\n\n**Files**:\n- `examples/website/.commando/website.ts`: imports, comments\n- `examples/website/.commando/config.yml`: module references\n- `examples/standard-git/.commando/config.yml`: template references\n- All other example configs\n\n**Import changes**:\n- `@forge/command` → `@commando/command`\n- `@forge/aws` → `@commando/aws`\n- `forge-standard` → `commando-standard`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-06T16:45:12.983683-08:00","updated_at":"2025-12-06T16:45:12.983683-08:00","dependencies":[{"issue_id":"forge-9q2","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.544446-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-9q2","depends_on_id":"forge-bch","type":"blocks","created_at":"2025-12-06T16:45:50.461735-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-aaj","title":"Rename forge to commando (cmdo)","description":"Rename the project from \"forge\" to \"commando\" with CLI command `cmdo`.\n\n**Motivation**: Avoid Homebrew naming conflict with existing `forge` package.\n\n**Scope**: ~200+ file changes across source, scripts, docs, tests, and configuration.\n\n**Key Changes**:\n- Package: `@planet57/forge` → `@planet57/commando`\n- Binary: `forge` → `cmdo`, `forge-dev` → `cmdo-dev`\n- Environment: `FORGE_HOME` → `COMMANDO_HOME`\n- Directories: `~/.forge` → `~/.commando`, `.forge/` → `.commando/`\n- Types: `Forge*` → `Commando*`\n- Beads prefix: `forge-` → `commando-`","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-06T16:44:10.983084-08:00","updated_at":"2025-12-06T16:44:10.983084-08:00"}
{"id":"forge-bch","title":"Rename project directories .forge/ → .commando/","description":"Rename all .forge/ directories and update references.\n\n**Directories to rename**:\n- `examples/website/.forge/` → `.commando/`\n- `examples/basic/.forge/` → `.commando/`\n- `examples/deps/.forge/` → `.commando/`\n- `examples/standard-git/.forge/` → `.commando/`\n- `tests/fixtures/test-project/.forge/` → `.commando/`\n- `dev-home/forge/` → `dev-home/commando/`\n\n**References to update**:\n- All documentation mentioning `.forge/`\n- All code searching for `.forge/` directory\n- Config file paths","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-06T16:45:12.827373-08:00","updated_at":"2025-12-06T16:45:12.827373-08:00","dependencies":[{"issue_id":"forge-bch","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.369588-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-bch","depends_on_id":"forge-dif","type":"blocks","created_at":"2025-12-06T16:45:50.416973-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-bcn","title":"Update VS Code and IDE configuration","description":"Update IDE configuration files.\n\n**Files**:\n- `.vscode/launch.json`: FORGE_HOME env var in debug configs\n- Any other IDE-specific configuration\n\n**Changes**:\n- Line 13, 28: `\"FORGE_HOME\": \"${workspaceFolder}/dev-home/forge\"` → `\"COMMANDO_HOME\": \"${workspaceFolder}/dev-home/commando\"`","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-06T16:45:13.993306-08:00","updated_at":"2025-12-06T16:45:13.993306-08:00","dependencies":[{"issue_id":"forge-bcn","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:37.584677-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-dfh","title":"Rename GitHub repository","description":"Rename the GitHub repository itself.\n\n**Actions**:\n1. Rename repo `jdillon/forge` → `jdillon/commando` on GitHub\n2. Update local remote: `git remote set-url origin ...`\n3. GitHub provides automatic redirects, but update any hardcoded URLs\n\n**Dependent changes** (already covered in other stories):\n- package.json repository URL\n- README installation URLs\n- Documentation links\n\n**Note**: Do this after all code changes are complete and committed.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-06T16:45:13.819831-08:00","updated_at":"2025-12-06T16:45:13.819831-08:00","dependencies":[{"issue_id":"forge-dfh","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:37.412806-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-dfh","depends_on_id":"forge-kdf","type":"blocks","created_at":"2025-12-06T16:45:50.609445-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-dif","title":"Update lib/ source files","description":"Update all library source code.\n\n**Files**:\n- `lib/forge-home.ts` → consider renaming to `lib/commando-home.ts`\n  - Function names, comments, package.json template name\n- `lib/cli.ts`: program name, help text, version output\n- `lib/config-resolver.ts`: cosmiconfig(\"forge\") → cosmiconfig(\"commando\")\n- `lib/core.ts`: imports, type references\n- `lib/builtins.ts`: environment variable exports\n\n**String changes**:\n- `\"forge version\"` → `\"commando version\"`\n- `\"Try 'forge --help'\"` → `\"Try 'cmdo --help'\"`\n- `.name(\"forge\")` → `.name(\"cmdo\")`\n- `\".forge/\"` → `\".commando/\"`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T16:45:12.669226-08:00","updated_at":"2025-12-25T17:50:17.787074-08:00","closed_at":"2025-12-25T17:50:17.787074-08:00","close_reason":"Updated lib/ files: renamed forge-home→commando-home, updated imports, function names, and .forge→.commando references","dependencies":[{"issue_id":"forge-dif","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:36.197922-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-dy2","title":"Test 3: trigger auto-push","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-28T22:39:37.550796-08:00","updated_at":"2025-11-28T22:39:37.550796-08:00"}
{"id":"forge-e9g","title":"Homebrew tap distribution for Forge","description":"Enable `brew tap jdillon/forge \u0026\u0026 brew install forge` for macOS/Linux users.\n\n**Investigation complete** - see `sandbox/brew-tap-investigation/`\n\n**Chosen approach**: Bun runtime dependency (Approach A)\n- Requires `depends_on \"bun\"` in formula\n- Most similar to current install.sh behavior\n- Can migrate to standalone binary later (Approach B)","design":"## Architecture\n\n**Two separate directories**:\n- `FORGE_INSTALL` - Where core code lives (Cellar for Homebrew, FORGE_HOME for manual)\n- `FORGE_HOME` - User data (`~/.forge`) - config, state, cache, logs, plugins\n\n**Key code changes needed**:\n1. Make `bin/forge` detect Homebrew vs manual install\n2. Separate \"installation directory\" from \"user data directory\"\n3. Handle case where `FORGE_HOME` doesn't exist yet\n\n## Deliverables\n\n1. **homebrew-forge repository** - github.com/jdillon/homebrew-forge\n   - `Formula/forge.rb` - Main formula\n   - `README.md` - Installation instructions\n\n2. **Forge code changes**:\n   - Make FORGE_HOME configurable\n   - Support FORGE_INSTALL for core installation path\n\n3. **Release process**:\n   - Tag release → GitHub creates tarball\n   - Compute SHA256\n   - Update formula with URL + hash\n   - (Optional) GH Action to automate\n\n## Example Formula (Approach A)\n\n```ruby\nclass Forge \u003c Formula\n  desc \"Modern CLI framework for deployments\"\n  homepage \"https://github.com/jdillon/forge\"\n  url \"https://github.com/jdillon/forge/archive/refs/tags/v1.0.0.tar.gz\"\n  sha256 \"...\"\n  depends_on \"bun\"\n\n  def install\n    system \"bun\", \"install\", \"--production\"\n    libexec.install Dir[\"*\"]\n    (bin/\"forge\").write_env_script libexec/\"bin/forge\", FORGE_HOME: libexec\n  end\nend\n```","acceptance_criteria":"- [ ] `bin/forge` supports FORGE_INSTALL for Homebrew installation\n- [ ] `homebrew-forge` repository created\n- [ ] Formula installs and runs correctly\n- [ ] `brew tap jdillon/forge \u0026\u0026 brew install forge` works\n- [ ] `forge --version` and `forge --help` work\n- [ ] User data persists in `~/.forge`\n- [ ] `brew upgrade forge` works\n- [ ] `brew uninstall forge` cleanly removes (preserves user data)\n- [ ] Works on Apple Silicon and Intel Macs\n- [ ] Documentation updated in Forge README","notes":"## Work completed\n\n**Investigation** (2025-11-15):\n- Researched Homebrew tap mechanics\n- Analyzed 3 approaches (Bun dep, standalone binary, shell script)\n- Recommended Approach A (Bun dependency)\n- Documented FORGE_HOME conflict and resolution\n- Created implementation roadmap\n\n**Artifacts**:\n- `sandbox/brew-tap-investigation/README.md` - Full investigation\n- `sandbox/brew-tap-investigation/findings.md` - Key insights\n- `sandbox/brew-tap-investigation/implementation-steps.md` - Step-by-step guide\n- `sandbox/brew-tap-investigation/forge.rb.example` - Template formula\n\n**Tap repository started** (2025-11-20):\n- Repo: `github.com/jdillon/homebrew-planet57`\n- Tap name: `jdillon/planet57`\n- Formula: `Formula/forge.rb` - working draft\n- Approach: Installs to FORGE_HOME, symlinks bin\n- Current URL: local tarball for testing\n\n## Remaining work\n\n1. Switch formula from local tarball to GitHub release URL\n2. Tag v0.1.0 release and compute SHA256\n3. Test `brew tap jdillon/planet57 \u0026\u0026 brew install forge`\n4. Push tap repo to GitHub\n5. Update Forge README with installation instructions\n\n## Blockers\n\n1. ⚠️ Need stable release tagged (v0.1.0)\n2. ⚠️ Repos need to be made public first","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T02:24:37.548875-08:00","updated_at":"2025-11-27T01:14:15.079345-08:00","closed_at":"2025-11-27T01:14:15.079345-08:00","dependencies":[{"issue_id":"forge-e9g","depends_on_id":"forge-3ng","type":"blocks","created_at":"2025-11-26T02:26:54.282524-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-efc","title":"Homebrew formula: implement FORGE_HOME bootstrap semantics","description":"Update the Homebrew formula to properly bootstrap ~/.forge structure instead of using Cellar-native installation.\n\n**Problem**: Current formula installs to libexec and creates a custom wrapper. This doesn't match Forge's architecture which expects FORGE_HOME=~/.forge with the full package installed there.\n\n**Solution**: Formula should replicate what bin/install.sh does:\n- Use `post_install` to escape Homebrew's sandbox\n- Bootstrap ~/.forge structure\n- Install package via `bun add` to ~/.forge/node_modules/\n- Symlink the existing bin/forge wrapper\n\n**Key constraint**: Forge is a single-user install by design. Homebrew is just the delivery mechanism - the actual installation lives in ~/.forge. See CLAUDE.md for details.\n\n**Acceptance Criteria**:\n- [ ] Formula uses post_install for ~/.forge bootstrap\n- [ ] Creates ~/.forge/{config,state,cache,logs} directories\n- [ ] Writes package.json, bunfig.toml to ~/.forge\n- [ ] Runs `bun add` to install package to ~/.forge/node_modules/\n- [ ] Symlinks existing bin/forge wrapper to Homebrew bin\n- [ ] `brew install jdillon/planet57/forge` works end-to-end\n- [ ] `forge --version` and `forge --help` work\n- [ ] release.yml updated with new formula template","design":"## Formula Structure\n\n### install block (sandboxed)\nStage tarball contents to libexec for Homebrew tracking:\n```ruby\ndef install\n  libexec.install Dir[\"*\"]\nend\n```\n\n### post_install block (outside sandbox)\nBootstrap ~/.forge and install package:\n```ruby\ndef post_install\n  forge_home = ENV[\"FORGE_HOME\"] || \"#{Dir.home}/.forge\"\n  \n  # 1. Create directory structure\n  system \"mkdir\", \"-p\", \n    \"#{forge_home}/config\",\n    \"#{forge_home}/state\", \n    \"#{forge_home}/cache\",\n    \"#{forge_home}/logs\"\n  \n  # 2. Write package.json\n  File.write(\"#{forge_home}/package.json\", \u003c\u003c~JSON)\n    {\n      \"name\": \"forge-meta\",\n      \"version\": \"1.0.0\",\n      \"private\": true\n    }\n  JSON\n  \n  # 3. Write bunfig.toml\n  File.write(\"#{forge_home}/bunfig.toml\", \u003c\u003c~TOML)\n    [install]\n    exact = true\n    dev = false\n    peer = true\n    optional = false\n    auto = \"disable\"\n  TOML\n  \n  # 4. Install package to forge_home\n  Dir.chdir(forge_home) do\n    system Formula[\"bun\"].opt_bin/\"bun\", \"add\", \"file://#{libexec}\"\n  end\n  \n  # 5. Symlink the wrapper\n  forge_bin = \"#{forge_home}/node_modules/@planet57/forge/bin/forge\"\n  bin.install_symlink forge_bin =\u003e \"forge\"\nend\n```\n\n### caveats\n```ruby\ndef caveats\n  \u003c\u003c~EOS\n    Forge installed to #{ENV[\"FORGE_HOME\"] || \"~/.forge\"}\n    \n    User data (config, plugins, state) persists across upgrades.\n  EOS\nend\n```\n\n## Release workflow update\n\nThe release.yml needs to generate this formula template instead of the current libexec version.\n\n## Testing\n\n```bash\nbrew uninstall forge\nbrew untap jdillon/planet57\nbrew tap jdillon/planet57\nbrew install jdillon/planet57/forge\nforge --version\n```","notes":"post_install is ALSO sandboxed on macOS - cannot write to ~/.forge. Need alternative approach:\n\nOption 1: Caveats + manual setup command\n- Formula installs to libexec\n- User runs `brew postinstall forge` or `forge-setup` manually after install\n- Or: first run of `forge` bootstraps itself\n\nOption 2: Wrapper script bootstraps on first run\n- bin/forge wrapper checks if ~/.forge exists\n- If not, runs bootstrap before continuing\n- Transparent to user","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-27T01:14:43.40734-08:00","updated_at":"2025-11-27T16:26:54.758713-08:00","closed_at":"2025-11-27T16:26:54.758713-08:00"}
{"id":"forge-eny","title":"Release command and workflow automation","description":"Create a release workflow that can be triggered via GitHub UI button or forge CLI command.\n\n**Goals:**\n- One-click release from GitHub Actions UI\n- Optional: `forge release` CLI command for local triggering\n- Auto-tag based on package.json version\n- Post-release: bump version and commit","design":"## Option A: GitHub Actions Manual Dispatch (Recommended)\n\n`workflow_dispatch` allows triggering from GitHub UI with optional inputs:\n\n```yaml\non:\n  workflow_dispatch:\n    inputs:\n      bump:\n        description: 'Version bump type'\n        required: true\n        default: 'patch'\n        type: choice\n        options: [patch, minor, major]\n\njobs:\n  release:\n    steps:\n      - Checkout\n      - Read version from package.json\n      - Create and push tag\n      - (release.yml triggers on tag, does the rest)\n      \n  post-release:\n    needs: release\n    steps:\n      - Bump version in package.json\n      - Commit \"chore: bump version to X.Y.Z\"\n      - Push to main\n```\n\n**UI**: Actions tab → \"Release\" workflow → \"Run workflow\" button → Select bump type → Go\n\n## Option B: Forge CLI Command\n\n```bash\nforge release [patch|minor|major]\n```\n\n- Reads current version from package.json\n- Creates git tag\n- Pushes tag (triggers release.yml)\n- Bumps version locally\n- Commits and pushes\n\n## Recommendation\n\nStart with Option A (workflow_dispatch) - no code needed, just YAML. Add CLI command later if wanted.","acceptance_criteria":"- [ ] Can trigger release from GitHub Actions UI\n- [ ] Workflow creates tag from package.json version\n- [ ] release.yml triggers and creates GitHub release\n- [ ] Version bumped and committed post-release\n- [ ] Works for patch/minor/major bumps","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T23:08:28.569302-08:00","updated_at":"2025-11-27T01:14:14.985577-08:00","closed_at":"2025-11-27T01:14:14.985577-08:00"}
{"id":"forge-eua","title":"Shell completion support (bash/zsh/fish)","description":"Add shell completion for commands, options, and arguments.\n\n**Library**: `omelette` (already installed)\n\n**Features needed**:\n- Auto-complete commands and subcommands\n- Auto-complete options (--help, --debug, etc.)\n- Auto-complete command-specific arguments\n- Generate completion scripts for bash/zsh/fish","design":"Use `omelette` library to generate completion scripts.\n\n```typescript\nimport omelette from 'omelette';\n\nconst completion = omelette('forge \u003ccommand\u003e \u003csubcommand\u003e');\n\ncompletion.on('command', ({ reply }) =\u003e {\n  reply(['website', 'basic', 'help', 'version']);\n});\n\ncompletion.on('subcommand', ({ before, reply }) =\u003e {\n  if (before === 'website') {\n    reply(['build', 'deploy', 'status']);\n  }\n});\n\ncompletion.init();\n```\n\n**Installation**: `forge completion install` to add to shell profile.","acceptance_criteria":"- [ ] `forge completion` command exists\n- [ ] `forge completion install` adds to shell profile\n- [ ] Tab-completes top-level commands\n- [ ] Tab-completes subcommands within groups\n- [ ] Tab-completes global options\n- [ ] Works in bash, zsh, fish","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-26T15:23:00.83981-08:00","updated_at":"2025-11-26T15:23:00.83981-08:00"}
{"id":"forge-gr3","title":"Subcommands don't trigger dependency installation for new modules","description":"When adding a new command module with dependencies:\n\n1. Add new module (e.g., `.forge/figma.ts`)\n2. Update `config.yml` with module and dependencies\n3. Run subcommand directly: `forge figma login` → **fails**\n4. Run parent command: `forge figma` → works, installs deps\n5. Run subcommand again: `forge figma login` → works\n\nThe dependency detection/`bun install` logic runs for the parent command but not when invoking subcommands directly. Should detect missing deps and run install regardless of command depth.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-08T02:42:49.198499-08:00","updated_at":"2025-12-08T02:42:55.788382-08:00","labels":["bootstrap","cli","dependencies"]}
{"id":"forge-gtk","title":"Consider renaming forge to commando (cmdo)","description":"Evaluate renaming the project from \"forge\" to \"commando\" with CLI command `cmdo`.\n\n**Motivation**: There's already a `forge` package in Homebrew, causing naming conflicts.\n\n**Findings**:\n- Neither `commando` nor `cmdo` exist in Homebrew\n- Similar packages: commandbox, command-x, commandq, cdo, cmd (none conflict)\n\n**TODO**:\n- [ ] Decide on rename\n- [ ] If yes, update package name, CLI binary, docs, and Homebrew formula","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-06T16:40:30.684259-08:00","updated_at":"2025-12-06T16:42:27.397212-08:00","closed_at":"2025-12-06T16:42:27.397212-08:00"}
{"id":"forge-kdf","title":"Migrate beads prefix forge- → commando-","description":"Migrate existing beads to new prefix.\n\n**Strategy**:\n1. Export all issues: `bd export -o beads-backup.jsonl`\n2. Use `bd rename-prefix commando` (if available) or manual migration\n3. Update all issue IDs from `forge-xxx` to `commando-xxx`\n4. Verify references in commit messages still work\n\n**Files with bead references**:\n- CLAUDE.md: `Resolves: forge-xxx` pattern\n- Any commit messages (historical, won't change)\n\n**Note**: This should be done LAST after all other renames, as it affects the tracking system itself.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-06T16:45:13.645341-08:00","updated_at":"2025-12-06T16:45:13.645341-08:00","dependencies":[{"issue_id":"forge-kdf","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:37.240493-08:00","created_by":"daemon","metadata":"{}"},{"issue_id":"forge-kdf","depends_on_id":"forge-72c","type":"blocks","created_at":"2025-12-06T16:45:50.56028-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-kxw","title":"Automate Homebrew formula updates on release","description":"Automate the Homebrew tap update process when releasing new versions. Currently manual: rebuild tarball, compute sha256, update formula, push to tap.\n\n**Reference**: beads project `.github/workflows/update-homebrew.yml`","design":"## Approach\n\n**Phase 1**: Automate current approach (Bun tarball)\n- Tag push (v*) triggers release workflow\n- Build tarball, create GitHub release\n- Compute sha256, generate formula, push to tap\n- Low effort, matches current manual process\n\n**Phase 2** (future): Standalone binary via `bun build --compile`\n- Zero-dependency binaries for darwin-arm64, darwin-x64, linux-x64\n- Better UX but larger binaries (~50MB)\n\n## Implementation\n\n### release.yml workflow\n```yaml\non:\n  push:\n    tags: ['v*']\n\njobs:\n  release:\n    steps:\n      - uses: actions/checkout@v4\n      - uses: oven-sh/setup-bun@v2\n      - run: bun run pack\n      - uses: softprops/action-gh-release@v1\n        with:\n          files: build/*.tgz\n\n  update-homebrew:\n    needs: release\n    steps:\n      - Download tarball, compute sha256\n      - Generate formula from template\n      - Clone tap repo using HOMEBREW_TAP_TOKEN\n      - Commit and push updated formula\n```\n\n### Formula template\n```ruby\nclass Forge \u003c Formula\n  url \"https://github.com/jdillon/forge/releases/download/v{{VERSION}}/planet57-forge-{{VERSION}}.tgz\"\n  sha256 \"{{SHA256}}\"\n  version \"{{VERSION}}\"\n  depends_on \"oven-sh/bun/bun\"\n  # ...\nend\n```\n\n### Secrets required\n- `HOMEBREW_TAP_TOKEN`: PAT with `repo` scope for pushing to homebrew-planet57","acceptance_criteria":"- [ ] `.github/workflows/release.yml` created\n- [ ] Formula template with placeholders\n- [ ] `HOMEBREW_TAP_TOKEN` secret configured\n- [ ] Tag push triggers release + formula update\n- [ ] `brew upgrade forge` works after release\n- [ ] Manual dispatch option for testing","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-26T13:53:13.833881-08:00","updated_at":"2025-11-26T13:53:13.833881-08:00","dependencies":[{"issue_id":"forge-kxw","depends_on_id":"forge-3ng","type":"blocks","created_at":"2025-11-26T13:53:20.515362-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-mvj","title":"ExitNotification stack trace shown on unknown command","description":"Running forge with an unknown command displays the error message correctly, but then shows an ugly `ExitNotification` stack trace that shouldn't be visible to users.\n\n**Repro**: `forge foo` (any unknown command)\n\n**Actual**:\n```\nerror: too many arguments. Expected 0 arguments but got 1.\nERROR: unknown command. Run 'forge --help' to see available commands\nTry 'forge --help' for more information.\n44 | /**\n45 |  * Exit process with code (clean exit)\n...\nExitNotification: Exit with code 1\n exitCode: 1,\n      at exit (~/.forge/node_modules/@planet57/forge/lib/helpers.ts:49:9)\n      ...\n```\n\n**Expected**: Just the error message, no stack trace. `ExitNotification` is internal control flow, not a user-facing error.","design":"`ExitNotification` is thrown as a clean exit mechanism but Bun is printing the stack trace. Need to ensure it's caught at the top level and handled silently (just exit with the code).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-26T02:21:58.105051-08:00","updated_at":"2025-11-28T00:33:42.1511-08:00","closed_at":"2025-11-28T00:33:42.1511-08:00"}
{"id":"forge-n0y","title":"Rename TypeScript types Forge* → Commando*","description":"Rename exported types and interfaces.\n\n**Types in lib/types.ts**:\n- `interface Forge` → `interface Commando`\n- `interface ForgeContext` → `interface CommandoContext`\n- `interface ForgeCommand` → `interface CommandoCommand`\n- `interface ForgeModuleMetadata` → `interface CommandoModuleMetadata`\n- `interface ForgeConfig` → `interface CommandoConfig`\n\n**Ripple effects**:\n- All files importing these types\n- lib/core.ts\n- Various command files\n- Test files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T16:45:12.365899-08:00","updated_at":"2025-12-25T17:47:28.207516-08:00","closed_at":"2025-12-25T17:47:28.207516-08:00","close_reason":"Types renamed, shell scripts updated","dependencies":[{"issue_id":"forge-n0y","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:35.847716-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-q4h","title":"Add standard prompt library for interactive CLI","description":"Add a prompt library for interactive user input in forge commands.\n\n## Options Evaluated\n\n| Library | Status | Size | Notes |\n|---------|--------|------|-------|\n| **@clack/prompts** | Active (v1 alpha) | 80% smaller | Beautiful minimal UI, spinner/tasks built-in, opinionated |\n| **@inquirer/prompts** | Active (rewritten) | Moderate | Modern rewrite of classic inquirer, most features |\n| **prompts** | Maintained | Lightweight | Zero deps, simple API, 8.7k stars |\n| **enquirer** | Low activity | ~4ms load | Used by eslint/webpack/yarn, but not actively developed |\n\n## Recommendation\n\n**Primary: @clack/prompts**\n- Modern, actively developed (v1 coming)\n- Built-in spinner, tasks, logging (`log.info`, `log.success`, etc.)\n- Minimal and beautiful out of the box\n- Simple API - less boilerplate\n- Good TypeScript support\n- Trade-off: Opinionated, fewer customization options\n\n**Alternative: @inquirer/prompts**\n- More flexibility and customization\n- Larger ecosystem, more prompt types\n- Modern rewrite of battle-tested inquirer\n- Better choice if heavy customization needed\n\n## References\n- https://www.clack.cc/\n- https://github.com/bombshell-dev/clack\n- https://www.npmjs.com/package/@inquirer/prompts\n- https://github.com/SBoudrias/Inquirer.js","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T22:57:36.177559-08:00","updated_at":"2025-12-09T22:57:36.177559-08:00","labels":["cli","dependencies","research"]}
{"id":"forge-rjt","title":"Consider per-project node_modules instead of shared","description":"Evaluate moving from shared node_modules to per-project node_modules directories.\n\n## Current Approach\nAll forge projects share a single node_modules in ~/.forge/, with sub-projects linked in.\n\n## Alternative\nEach .forge/ project gets its own node_modules directory.\n\n## Why This May Be Worth It\n- Avoids dependency pollution between projects\n- Cleaner isolation - no conflicts between projects needing different versions\n- Simpler mental model\n\n## Why Disk Cost Is Minimal\nBun uses a global cache at `~/.bun/install/cache` and:\n- **Hardlinks** on Linux/Windows\n- **Clonefile** (copy-on-write) on macOS\n\nActual bytes exist only once in the cache. Each node_modules just has hardlinks/clonefiles pointing to the same data. Cost is only directory structure overhead and inode entries, NOT duplicate file content.\n\nSimilar to how pnpm works. Bun also has `--linker=isolated` mode (pnpm-style symlinked node_modules) for monorepos.\n\n## When to Revisit\nIf we find dependency pollution issues between projects with the current shared node_modules approach.\n\n## References\n- https://bun.com/docs/install/cache.md\n- https://thevalleyofcode.com/managing-node-modules-efficiently/\n- https://hy2k.dev/en/blog/2025/10-15-bun-install-isolated-vs-hoisted/","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-10T01:59:57.144701-08:00","updated_at":"2025-12-10T01:59:57.144701-08:00","labels":["architecture","dependencies","research"]}
{"id":"forge-sth","title":"Add 'config' subcommand to manage configuration","description":"Add a standard `forge config` command to view/edit configuration.\n\n**Scope**:\n- Project config: `.forge/config.yml`\n- Local overrides: `.forge/config.local.yml`\n- Global/user config: `~/.forge/config.yml`\n\n**Possible subcommands**:\n- `forge config get \u003ckey\u003e` - get a value\n- `forge config set \u003ckey\u003e \u003cvalue\u003e` - set a value\n- `forge config list` - show merged config\n- `forge config edit [--global|--local]` - open in editor\n- `forge config path [--global|--local]` - show config file path\n\n**Considerations**:\n- Which layer to write to by default (project vs local vs global)\n- How to handle nested keys (dot notation? `settings.figma.token`)\n- Show effective/merged values vs per-layer values","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T13:04:04.865681-08:00","updated_at":"2025-12-09T13:04:04.865681-08:00","labels":["cli","config"]}
{"id":"forge-sua","title":"Native nested subcommands support","description":"Currently forge supports one level of command grouping via modules (`forge \u003cgroup\u003e \u003ccommand\u003e`), but no native support for nested subcommands (`forge \u003cgroup\u003e \u003csubgroup\u003e \u003ccommand\u003e`).\n\n**Current workaround**: Switch statement on positional argument (Style 9)\n\n**Downsides of workaround**:\n- No automatic help for sub-actions\n- Manual validation and error messages\n- Can't define per-action options/arguments cleanly\n\n**Use cases**:\n- `forge ios sim list|boot|shutdown`\n- `forge db migrate up|down|status`\n- `forge k8s pod list|logs|exec`","design":"## Proposed API\n\nAdd `subcommands` property to `ForgeCommand`:\n\n```typescript\n// lib/types.ts\nexport interface ForgeCommand {\n  description: string;\n  subcommands?: Record\u003cstring, ForgeCommand\u003e;  // NEW\n  defineCommand?: (cmd: Command) =\u003e void;\n  execute?: (...) =\u003e Promise\u003cvoid\u003e;  // optional if has subcommands\n}\n```\n\n**Usage**:\n```typescript\nexport const sim: ForgeCommand = {\n  description: 'iOS simulator commands',\n  subcommands: {\n    list: {\n      description: 'List available simulators',\n      execute: async () =\u003e { /* ... */ }\n    },\n    boot: {\n      description: 'Boot simulator',\n      defineCommand: (cmd) =\u003e cmd.argument('[name]', 'Simulator name'),\n      execute: async (opts, args) =\u003e { /* ... */ }\n    }\n  }\n};\n```\n\n**Result**:\n```\n$ forge ios sim --help\nCommands:\n  list      List available simulators\n  boot      Boot simulator\n```\n\n## Implementation Notes\n\n1. **core.ts**: Check for `subcommands` and recursively build Commander subcommands via `cmd.addCommand()`\n2. **Depth limit**: Consider 2-3 levels max\n3. **Execute behavior**: If has `subcommands` but no `execute`, show help when invoked without subcommand","acceptance_criteria":"- [ ] `subcommands` property added to ForgeCommand type\n- [ ] core.ts recursively registers nested subcommands\n- [ ] `--help` shows subcommand list properly\n- [ ] Per-subcommand options/arguments work\n- [ ] Depth limit enforced (2-3 levels)\n- [ ] Commands without execute show help when invoked alone\n- [ ] Example added to examples/","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-26T02:28:12.126037-08:00","updated_at":"2025-11-26T02:28:12.126037-08:00"}
{"id":"forge-ubk","title":"Rename binary files and package identity","description":"Rename core binary files and update package.json.\n\n**Files**:\n- `bin/forge` → `bin/cmdo`\n- `bin/forge-dev` → `bin/cmdo-dev`\n- `package.json`: name, bin entry, repository URL\n\n**Changes in package.json**:\n- Line 2: `\"name\": \"@planet57/forge\"` → `\"@planet57/commando\"`\n- Line 17: repository URL\n- Line 21: `\"bin/forge\"` → `\"bin/cmdo\"`\n- Line 70: comment reference","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T16:45:12.064319-08:00","updated_at":"2025-12-25T17:39:46.251126-08:00","closed_at":"2025-12-25T17:39:46.251126-08:00","close_reason":"Renamed bin/forge→bin/cmdo, bin/forge-dev→bin/cmdo-dev, updated package.json","dependencies":[{"issue_id":"forge-ubk","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:35.497967-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-uhk","title":"Add log-to-file option for AI-driven workflows","description":"Add ability to log to a file while keeping console output terse.\n\n**Use case**: AI-driven workflows need minimal console output to avoid filling context, but detailed logs should still be available when:\n- Things go sideways and need debugging\n- Need to confirm specific output without polluting context\n\n**Possible approach**:\n- `--log-file \u003cpath\u003e` flag or config option\n- File gets full verbose output regardless of console verbosity\n- Console stays terse for AI consumption","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T15:00:52.845201-08:00","updated_at":"2025-12-08T15:00:52.845201-08:00","labels":["ai-workflows","cli","logging"]}
{"id":"forge-xgy","title":"Update environment variables FORGE_* → COMMANDO_*","description":"Replace all environment variable references.\n\n**Variables**:\n- `FORGE_HOME` → `COMMANDO_HOME` (primary, used everywhere)\n- `FORGE_RESTARTED` → `COMMANDO_RESTARTED` (lib/cli.ts, bin/forge)\n- `FORGE_PROJECT` → `COMMANDO_PROJECT` (lib/config-resolver.ts)\n\n**Files affected**:\n- lib/forge-home.ts\n- lib/cli.ts (lines 105, 117, 132)\n- lib/config-resolver.ts (lines 100, 114-124, 252)\n- lib/builtins.ts (line 68)\n- lib/version.ts (line 40)\n- bin/forge, bin/forge-dev, bin/install.sh, bin/uninstall.sh, bin/brew-bootstrap.sh\n- .vscode/launch.json","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T16:45:12.211543-08:00","updated_at":"2025-12-25T17:44:30.510411-08:00","closed_at":"2025-12-25T17:44:30.510411-08:00","close_reason":"Updated all FORGE_* env vars to COMMANDO_* in lib/, bin/, and tests/","dependencies":[{"issue_id":"forge-xgy","depends_on_id":"forge-aaj","type":"parent-child","created_at":"2025-12-06T16:45:35.672486-08:00","created_by":"daemon","metadata":"{}"}]}
{"id":"forge-xre","title":"Add CLI commands to interface with package system","description":"Need user-facing commands to manage the forge package system:\n\nPossible commands:\n- `forge packages list` - show installed packages\n- `forge packages install \u003cpkg\u003e` - install a package\n- `forge packages update` - update all packages\n- `forge packages outdated` - show outdated packages\n- `forge packages add \u003cpkg\u003e` - add to config.yml and install\n\nCurrently no way for users to interact with the package system directly.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T16:37:12.956373-08:00","updated_at":"2025-12-08T16:37:12.956373-08:00","labels":["cli","packages"]}
{"id":"forge-y25","title":"Test: protected branch workflow","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-28T22:31:12.372362-08:00","updated_at":"2025-11-28T22:31:12.372362-08:00"}
